:root {
  --bg:#090c09; --panel:#161b22; --text:#e6edf3; --muted:#8b949e; --accent:#18453B;
  --ok:#2ea043; --warn:#d29922; --danger:#f85149; --border:#30363d;
  --mono:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  --radius:14px;
  --bar-in: #2ea043;   /* green */
  --bar-warn: #d29922; /* amber */
  --bar-out: #f85149;  /* red */
}

*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{background:var(--bg);color:var(--text);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

.topbar{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:14px 18px;border-bottom:1px solid var(--border);background:#0f141b}
.topbar h1{margin:0;font-size:18px}

.dbc-controls{display:flex;gap:10px;align-items:center}
.file{position:relative;display:inline-flex}
.file input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer}
.file span,button{padding:8px 12px;background:var(--panel);border:1px solid var(--border);border-radius:10px;color:var(--text);cursor:pointer}
button.ghost{background:transparent}
button:hover,.file span:hover{border-color:var(--accent)}

.view-switch{display:flex;gap:8px}
.view-switch .primary{background:var(--accent);border-color:var(--accent)}

main{max-width:95vw;margin:0 auto;padding:16px}

.status,.filters{
  display:flex;gap:12px;align-items:center;flex-wrap:wrap;
  background:var(--panel);border:1px solid var(--border);
  padding:10px 12px;border-radius:var(--radius);margin-bottom:12px
}
.status strong{color:var(--muted)}
.status #fbStatus.ok{color:var(--ok)} .status #fbStatus.err{color:var(--danger)}
.status #authStatus{color:var(--muted)}

.filters input,.filters select{
  background:#0e1218;color:var(--text);border:1px solid var(--border);
  border-radius:10px;padding:8px 10px;min-width:220px
}

.table-wrap{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}
table{width:100%;border-collapse:collapse}
thead th{text-align:left;font-weight:600;color:var(--muted);border-bottom:1px solid var(--border);padding:10px}
tbody td{padding:10px;border-bottom:1px solid var(--border);vertical-align:top}
tbody tr:hover{background:#111823}
code,.mono{font-family:var(--mono)}
.sig{display:inline-block;margin:0 10px 6px 0;padding:2px 6px;background:#0e1218;border:1px solid var(--border);border-radius:8px;font-family:var(--mono)}
.sig .k{color:var(--muted)} .sig .v{color:var(--accent)}
.raw{color:var(--muted);font-family:var(--mono)} .small{color:var(--muted);font-size:12px}
.tsMajor{font-weight:600} .tsMinor{color:var(--muted);font-size:12px;margin-top:2px}

/* Bars view */
.bars{margin-bottom:14px}
.bars-controls{
  background:var(--panel);border:1px solid var(--border);
  border-radius:var(--radius);padding:10px 12px;margin-bottom:10px
}
.add-metric{display:flex;gap:8px;flex-wrap:wrap}
.add-metric input{
  background:#0e1218;color:var(--text);border:1px solid var(--border);
  border-radius:10px;padding:8px 10px;min-width:160px
}
.add-metric button{padding:8px 12px;border:1px solid var(--border);border-radius:10px;cursor:pointer}

.bars-grid{
  display:grid;grid-template-columns: repeat(auto-fill, minmax(16vw, 1fr));gap:12px
}
.bar-card{
  background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);
  padding:10px;display:flex;gap:10px;align-items:stretch
}
.bar-fill-wrap{
  position:relative;width:36px;min-width:36px;border:1px solid var(--border);
  border-radius:8px;background:#0e1218;overflow:hidden
}
.bar-fill{position:absolute;left:0;right:0;bottom:0;height:0%;background:var(--bar-in)}
.bar-fill.warn{background:var(--bar-warn)}
.bar-fill.out{background:var(--bar-out)}
.bar-info{flex:1 1 auto;min-width:0}
.bar-title{font-weight:600;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.bar-value{font-family:var(--mono);font-size:16px}
.bar-range{color:var(--muted);font-size:12px}
.badge-oor{margin-left:6px;padding:0 6px;border:1px solid var(--border);border-radius:999px;font-size:12px}

/* Sparkline */
.sparkline{width:100%;height:34px;border:1px solid var(--border);border-radius:8px;background:#0e1218;margin-top:6px}

.muted{color:var(--muted)} .hidden{display:none !important}
.table-only{display:none} /* only show in table mode; JS will toggle */